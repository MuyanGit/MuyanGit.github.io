<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="https://cdn.jsdelivr.net/gh/MuyanGit/ImageHosting/images/剑来大小抠图/bitbug_favicon大.ico"><link rel="icon" href="https://cdn.jsdelivr.net/gh/MuyanGit/ImageHosting/images/剑来大小抠图/bitbug_favicon大.ico"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="MuyanGit"><meta name="keywords" content=""><meta name="description" content="Python中内置的日志模块logging用法详解2021-11-30阅读 1.8K0 交流、咨询，有疑问欢迎添加QQ 2125364717，一起交流、一起发现问题、一起进步啊，哈哈哈哈哈 logging模块简介 Python的logging模块提供了通用的日志系统，可以方便第三方模块或者是应用使用。这个模块提供不同的日志级别，并可以采用不同的方式记录日志，比如文件，HTTP GET&#x2F;P"><meta property="og:type" content="article"><meta property="og:title" content="Python中内置的日志模块logging用法详解"><meta property="og:url" content="http://example.com/2022/01/22/Python%E4%B8%AD%E5%86%85%E7%BD%AE%E7%9A%84%E6%97%A5%E5%BF%97%E6%A8%A1%E5%9D%97logging%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/index.html"><meta property="og:site_name" content="MuyanGit的博客"><meta property="og:description" content="Python中内置的日志模块logging用法详解2021-11-30阅读 1.8K0 交流、咨询，有疑问欢迎添加QQ 2125364717，一起交流、一起发现问题、一起进步啊，哈哈哈哈哈 logging模块简介 Python的logging模块提供了通用的日志系统，可以方便第三方模块或者是应用使用。这个模块提供不同的日志级别，并可以采用不同的方式记录日志，比如文件，HTTP GET&#x2F;P"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://ask.qcloudimg.com/http-save/yehe-4464657/1f459fwtz7.png?imageView2/2/w/1620"><meta property="og:image" content="https://ask.qcloudimg.com/http-save/yehe-4464657/tduv3lj9wi.png?imageView2/2/w/1620"><meta property="article:published_time" content="2022-01-21T19:05:57.000Z"><meta property="article:modified_time" content="2022-01-24T08:39:15.888Z"><meta property="article:author" content="MuyanGit"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://ask.qcloudimg.com/http-save/yehe-4464657/1f459fwtz7.png?imageView2/2/w/1620"><title>Python中内置的日志模块logging用法详解 - MuyanGit的博客</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><script id="fluid-configs">var dntVal,Fluid=window.Fluid||{},CONFIG=(Fluid.ctx=Object.assign({},Fluid.ctx),{hostname:"example.com",root:"/",version:"1.9.2",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:"wrsI8VLOqU4aU1Bf7ax2ybPp-MdYXbMMI",app_key:"AEijWlUoG3pMbyJKxexAmJtN",server_url:null,path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml"});CONFIG.web_analytics.follow_dnt&&(dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on")))</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 6.2.0"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>言念君子，温其如玉。</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> 首页</a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> 归档</a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> 分类</a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> 标签</a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> 关于</a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/default.png) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="Python中内置的日志模块logging用法详解"></span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2022-01-22 03:05" pubdate>2022年1月22日 凌晨</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 23k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 190 分钟 </span><span id="leancloud-page-views-container" class="post-meta" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="leancloud-page-views"></span> 次</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 style="display:none">Python中内置的日志模块logging用法详解</h1><div class="markdown-body"><h1 id="Python中内置的日志模块logging用法详解"><a href="#Python中内置的日志模块logging用法详解" class="headerlink" title="Python中内置的日志模块logging用法详解"></a>Python中内置的日志模块logging用法详解</h1><p>2021-11-30阅读 1.8K0</p><p><em>交流、咨询，有疑问欢迎添加QQ 2125364717，一起交流、一起发现问题、一起进步啊，哈哈哈哈哈</em></p><p><strong>logging模块简介</strong></p><p>Python的logging模块提供了通用的日志系统，可以方便第三方模块或者是应用使用。这个模块提供不同的日志级别，并可以采用不同的方式记录日志，比如文件，HTTP GET&#x2F;POST，SMTP，Socket等，甚至可以自己实现具体的日志记录方式。logging模块与log4j的机制是一样的，只是具体的实现细节不同。模块提供logger，handler，filter，formatter。</p><ul><li>logger：提供日志接口，供应用代码使用。logger最长用的操作有两类：配置和发送日志消息。可以通过logging.getLogger(name)获取logger对象，如果不指定name则返回root对象，多次使用相同的name调用getLogger方法返回同一个logger对象。</li><li>handler：将日志记录（log record）发送到合适的目的地（destination），比如文件，socket等。一个logger对象可以通过addHandler方法添加0到多个handler，每个handler又可以定义不同日志级别，以实现日志分级过滤显示。</li><li>filter：提供一种优雅的方式决定一个日志记录是否发送到handler。</li><li>formatter：指定日志记录输出的具体格式。formatter的构造方法需要两个参数：消息的格式字符串和日期字符串，这两个参数都是可选的。</li></ul><p>与log4j类似，logger，handler和日志消息的调用可以有具体的日志级别（Level），只有在日志消息的级别大于logger和handler的级别。</p><p><strong>logging用法解析</strong></p><p>\1. 初始化 logger &#x3D; logging.getLogger(“endlesscode”)，getLogger()方法后面最好加上所要日志记录的模块名字，后面的日志格式中的%(name)s 对应的是这里的模块名字 2. 设置级别 logger.setLevel(logging.DEBUG),Logging中有NOTSET &lt; DEBUG &lt; INFO &lt; WARNING &lt; ERROR &lt; CRITICAL这几种级别，日志会记录设置级别以上的日志 3. Handler，常用的是StreamHandler和FileHandler，windows下你可以简单理解为一个是console和文件日志，一个打印在CMD窗口上，一个记录在一个文件上</p><p>\4. formatter，定义了最终log信息的顺序,结构和内容，我喜欢用这样的格式 ‘[%(asctime)s] [%(levelname)s] %(message)s’, ‘%Y-%m-%d %H:%M:%S’，</p><ul><li>%(name)s Logger的名字</li><li>%(levelname)s 文本形式的日志级别</li><li>%(message)s 用户输出的消息</li><li>%(asctime)s 字符串形式的当前时间。默认格式是 “2003-07-08 16:49:45,896”。逗号后面的是毫秒</li><li>%(levelno)s 数字形式的日志级别</li><li>%(pathname)s 调用日志输出函数的模块的完整路径名，可能没有</li><li>%(filename)s 调用日志输出函数的模块的文件名</li><li>%(module)s 调用日志输出函数的模块名</li><li>%(funcName)s 调用日志输出函数的函数名</li><li>%(lineno)d 调用日志输出函数的语句所在的代码行</li><li>%(created)f 当前时间，用UNIX标准的表示时间的浮 点数表示</li><li>%(relativeCreated)d 输出日志信息时的，自Logger创建以 来的毫秒数</li><li>%(thread)d 线程ID。可能没有</li><li>%(threadName)s 线程名。可能没有</li><li>%(process)d 进程ID。可能没有</li></ul><p>\5. 记录 使用object.debug(message)来记录日志 下面来写一个实例，在CMD窗口上只打出error以上级别的日志，但是在日志中打出debug以上的信息</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> logging<br>logger = logging.<span class="hljs-title function_">getLogger</span>(<span class="hljs-string">&quot;simple_example&quot;</span>)<br>logger.<span class="hljs-title function_">setLevel</span>(logging.<span class="hljs-property">DEBUG</span>)<br># 建立一个filehandler来把日志记录在文件里，级别为debug以上<br>fh = logging.<span class="hljs-title class_">FileHandler</span>(<span class="hljs-string">&quot;spam.log&quot;</span>)<br>fh.<span class="hljs-title function_">setLevel</span>(logging.<span class="hljs-property">DEBUG</span>)<br># 建立一个streamhandler来把日志打在<span class="hljs-variable constant_">CMD</span>窗口上，级别为error以上<br>ch = logging.<span class="hljs-title class_">StreamHandler</span>()<br>ch.<span class="hljs-title function_">setLevel</span>(logging.<span class="hljs-property">ERROR</span>)<br># 设置日志格式<br>formatter = logging.<span class="hljs-title class_">Formatter</span>(<span class="hljs-string">&quot;%(asctime)s - %(name)s - %(levelname)s - %(message)s&quot;</span>)<br>ch.<span class="hljs-title function_">setFormatter</span>(formatter)<br>fh.<span class="hljs-title function_">setFormatter</span>(formatter)<br>#将相应的handler添加在logger对象中<br>logger.<span class="hljs-title function_">addHandler</span>(ch)<br>logger.<span class="hljs-title function_">addHandler</span>(fh)<br># 开始打日志<br>logger.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;debug message&quot;</span>)<br>logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">&quot;info message&quot;</span>)<br>logger.<span class="hljs-title function_">warn</span>(<span class="hljs-string">&quot;warn message&quot;</span>)<br>logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;error message&quot;</span>)<br>logger.<span class="hljs-title function_">critical</span>(<span class="hljs-string">&quot;critical message&quot;</span>)<br></code></pre></td></tr></table></figure><p>运行一下将会看到CMD窗口只记录两条，spam.log中记录了五条日志</p><p><img src="https://ask.qcloudimg.com/http-save/yehe-4464657/1f459fwtz7.png?imageView2/2/w/1620" srcset="/img/loading.gif" lazyload alt="img"></p><p>当一个项目比较大的时候，不同的文件中都要用到Log,可以考虑将其封装为一个类来使用</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs javascript">#! <span class="hljs-regexp">/usr/</span>bin/env python<br>#coding=gbk<br><span class="hljs-keyword">import</span> logging,os<br> <br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Logger</span>:<br> def <span class="hljs-title function_">__init__</span>(self, path,clevel = logging.<span class="hljs-property">DEBUG</span>,<span class="hljs-title class_">Flevel</span> = logging.<span class="hljs-property">DEBUG</span>):<br>  self.<span class="hljs-property">logger</span> = logging.<span class="hljs-title function_">getLogger</span>(path)<br>  self.<span class="hljs-property">logger</span>.<span class="hljs-title function_">setLevel</span>(logging.<span class="hljs-property">DEBUG</span>)<br>  fmt = logging.<span class="hljs-title class_">Formatter</span>(<span class="hljs-string">&#x27;[%(asctime)s] [%(levelname)s] %(message)s&#x27;</span>, <span class="hljs-string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)<br>  #设置<span class="hljs-variable constant_">CMD</span>日志<br>  sh = logging.<span class="hljs-title class_">StreamHandler</span>()<br>  sh.<span class="hljs-title function_">setFormatter</span>(fmt)<br>  sh.<span class="hljs-title function_">setLevel</span>(clevel)<br>  #设置文件日志<br>  fh = logging.<span class="hljs-title class_">FileHandler</span>(path)<br>  fh.<span class="hljs-title function_">setFormatter</span>(fmt)<br>  fh.<span class="hljs-title function_">setLevel</span>(<span class="hljs-title class_">Flevel</span>)<br>  self.<span class="hljs-property">logger</span>.<span class="hljs-title function_">addHandler</span>(sh)<br>  self.<span class="hljs-property">logger</span>.<span class="hljs-title function_">addHandler</span>(fh)<br> <br> def <span class="hljs-title function_">debug</span>(self,message):<br>  self.<span class="hljs-property">logger</span>.<span class="hljs-title function_">debug</span>(message)<br> <br> def <span class="hljs-title function_">info</span>(self,message):<br>  self.<span class="hljs-property">logger</span>.<span class="hljs-title function_">info</span>(message)<br> <br> def <span class="hljs-title function_">war</span>(self,message):<br>  self.<span class="hljs-property">logger</span>.<span class="hljs-title function_">warn</span>(message)<br> <br> def <span class="hljs-title function_">error</span>(self,message):<br>  self.<span class="hljs-property">logger</span>.<span class="hljs-title function_">error</span>(message)<br> <br> def <span class="hljs-title function_">cri</span>(self,message):<br>  self.<span class="hljs-property">logger</span>.<span class="hljs-title function_">critical</span>(message)<br> <br><span class="hljs-keyword">if</span> __name__ ==<span class="hljs-string">&#x27;__main__&#x27;</span>:<br> logyyx = <span class="hljs-title class_">Logger</span>(<span class="hljs-string">&#x27;yyx.log&#x27;</span>,logging.<span class="hljs-property">ERROR</span>,logging.<span class="hljs-property">DEBUG</span>)<br> logyyx.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;一个debug信息&#x27;</span>)<br> logyyx.<span class="hljs-title function_">info</span>(<span class="hljs-string">&#x27;一个info信息&#x27;</span>)<br> logyyx.<span class="hljs-title function_">war</span>(<span class="hljs-string">&#x27;一个warning信息&#x27;</span>)<br> logyyx.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;一个error信息&#x27;</span>)<br> logyyx.<span class="hljs-title function_">cri</span>(<span class="hljs-string">&#x27;一个致命critical信息&#x27;</span>)<br></code></pre></td></tr></table></figure><p>这样每次使用的时候只要实例化一个对象就可以了</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">logobj = <span class="hljs-title class_">Logger</span>(‘filename<span class="hljs-string">&#x27;,clevel,Flevel)</span><br></code></pre></td></tr></table></figure><p>如果想在CMD窗口中对于error的日志标红，warning的日志标黄，那么可以使用ctypes模块</p><p><img src="https://ask.qcloudimg.com/http-save/yehe-4464657/tduv3lj9wi.png?imageView2/2/w/1620" srcset="/img/loading.gif" lazyload alt="img"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs javascript">#! <span class="hljs-regexp">/usr/</span>bin/env python<br>#coding=gbk<br><span class="hljs-keyword">import</span> logging,os<br><span class="hljs-keyword">import</span> ctypes<br> <br><span class="hljs-variable constant_">FOREGROUND_WHITE</span> = <span class="hljs-number">0x0007</span><br><span class="hljs-variable constant_">FOREGROUND_BLUE</span> = <span class="hljs-number">0x01</span> # text color contains blue.<br><span class="hljs-variable constant_">FOREGROUND_GREEN</span>= <span class="hljs-number">0x02</span> # text color contains green.<br><span class="hljs-variable constant_">FOREGROUND_RED</span> = <span class="hljs-number">0x04</span> # text color contains red.<br><span class="hljs-variable constant_">FOREGROUND_YELLOW</span> = <span class="hljs-variable constant_">FOREGROUND_RED</span> | <span class="hljs-variable constant_">FOREGROUND_GREEN</span><br> <br><span class="hljs-variable constant_">STD_OUTPUT_HANDLE</span>= -<span class="hljs-number">11</span><br>std_out_handle = ctypes.<span class="hljs-property">windll</span>.<span class="hljs-property">kernel32</span>.<span class="hljs-title class_">GetStdHandle</span>(<span class="hljs-variable constant_">STD_OUTPUT_HANDLE</span>)<br>def <span class="hljs-title function_">set_color</span>(color, handle=std_out_handle):<br> bool = ctypes.<span class="hljs-property">windll</span>.<span class="hljs-property">kernel32</span>.<span class="hljs-title class_">SetConsoleTextAttribute</span>(handle, color)<br> <span class="hljs-keyword">return</span> bool<br> <br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Logger</span>:<br> def <span class="hljs-title function_">__init__</span>(self, path,clevel = logging.<span class="hljs-property">DEBUG</span>,<span class="hljs-title class_">Fself</span>.<span class="hljs-property">logger</span>.<span class="hljs-title function_">critical</span>(message)level = logging.<span class="hljs-property">DEBUG</span>):<br>  self.<span class="hljs-property">logger</span> = logging.<span class="hljs-title function_">getLogger</span>(path)<br>  self.<span class="hljs-property">logger</span>.<span class="hljs-title function_">setLevel</span>(logging.<span class="hljs-property">DEBUG</span>)<br>  fmt = logging.<span class="hljs-title class_">Formatter</span>(<span class="hljs-string">&#x27;[%(asctime)s] [%(levelname)s] %(message)s&#x27;</span>, <span class="hljs-string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)<br>  #设置<span class="hljs-variable constant_">CMD</span>日志<br>  sh = logging.<span class="hljs-title class_">StreamHandler</span>()<br>  sh.<span class="hljs-title function_">setFormatter</span>(fmt)<br>  sh.<span class="hljs-title function_">setLevel</span>(clevel)<br>  #设置文件日志<br>  fh = logging.<span class="hljs-title class_">FileHandler</span>(path)<br>  fh.<span class="hljs-title function_">setFormatter</span>(fmt)<br>  fh.<span class="hljs-title function_">setLevel</span>(<span class="hljs-title class_">Flevel</span>)<br>  self.<span class="hljs-property">logger</span>.<span class="hljs-title function_">addHandler</span>(sh)<br>  self.<span class="hljs-property">logger</span>.<span class="hljs-title function_">addHandler</span>(fh)<br> <br> def <span class="hljs-title function_">debug</span>(self,message):<br>  self.<span class="hljs-property">logger</span>.<span class="hljs-title function_">debug</span>(message)<br> <br> def <span class="hljs-title function_">info</span>(self,message):<br>  self.<span class="hljs-property">logger</span>.<span class="hljs-title function_">info</span>(message)<br> <br> def <span class="hljs-title function_">war</span>(self,message,color=<span class="hljs-variable constant_">FOREGROUND_YELLOW</span>):<br>  <span class="hljs-title function_">set_color</span>(color)<br>  self.<span class="hljs-property">logger</span>.<span class="hljs-title function_">warn</span>(message)<br>  <span class="hljs-title function_">set_color</span>(<span class="hljs-variable constant_">FOREGROUND_WHITE</span>)<br> <br> def <span class="hljs-title function_">error</span>(self,message,color=<span class="hljs-variable constant_">FOREGROUND_RED</span>):<br>  <span class="hljs-title function_">set_color</span>(color)<br>  self.<span class="hljs-property">logger</span>.<span class="hljs-title function_">error</span>(message)<br>  <span class="hljs-title function_">set_color</span>(<span class="hljs-variable constant_">FOREGROUND_WHITE</span>)<br> <br> def <span class="hljs-title function_">cri</span>(self,message):<br>  self.<span class="hljs-property">logger</span>.<span class="hljs-title function_">critical</span>(message)<br> <br><span class="hljs-keyword">if</span> __name__ ==<span class="hljs-string">&#x27;__main__&#x27;</span>:<br> logyyx = <span class="hljs-title class_">Logger</span>(<span class="hljs-string">&#x27;yyx.log&#x27;</span>,logging.<span class="hljs-property">WARNING</span>,logging.<span class="hljs-property">DEBUG</span>)<br> logyyx.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;一个debug信息&#x27;</span>)<br> logyyx.<span class="hljs-title function_">info</span>(<span class="hljs-string">&#x27;一个info信息&#x27;</span>)<br> logyyx.<span class="hljs-title function_">war</span>(<span class="hljs-string">&#x27;一个warning信息&#x27;</span>)<br> logyyx.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;一个error信息&#x27;</span>)<br> logyyx.<span class="hljs-title function_">cri</span>(<span class="hljs-string">&#x27;一个致命critical信息&#x27;</span>)<br></code></pre></td></tr></table></figure><p><strong>多模块使用logging</strong> logging模块保证在同一个python解释器内，多次调用logging.getLogger(‘log_name’)都会返回同一个logger实例，即使是在多个模块的情况下。所以典型的多模块场景下使用logging的方式是在main模块中配置logging，这个配置会作用于多个的子模块，然后在其他模块中直接通过getLogger获取Logger对象即可。</p><p>配置文件：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs javascript">[loggers] <br>keys=root,main <br>  <br>[handlers] <br>keys=consoleHandler,fileHandler <br>  <br>[formatters] <br>keys=fmt <br>  <br>[logger_root] <br>level=<span class="hljs-variable constant_">DEBUG</span> <br>handlers=consoleHandler <br>  <br>[logger_main] <br>level=<span class="hljs-variable constant_">DEBUG</span> <br>qualname=main <br>handlers=fileHandler <br>  <br>[handler_consoleHandler] <br><span class="hljs-keyword">class</span>=<span class="hljs-title class_">StreamHandler</span> <br>level=<span class="hljs-variable constant_">DEBUG</span> <br>formatter=fmt <br>args=(sys.<span class="hljs-property">stdout</span>,) <br>  <br>[handler_fileHandler] <br><span class="hljs-keyword">class</span>=logging.<span class="hljs-property">handlers</span>.<span class="hljs-property">RotatingFileHandler</span> <br>level=<span class="hljs-variable constant_">DEBUG</span> <br>formatter=fmt <br>args=(<span class="hljs-string">&#x27;tst.log&#x27;</span>,<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-number">20000</span>,<span class="hljs-number">5</span>,) <br>  <br>[formatter_fmt] <br>format=%(asctime)s - %(name)s - %(levelname)s - %(message)s <br>datefmt= <br></code></pre></td></tr></table></figure><p>主模块main.py：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> logging <br><span class="hljs-keyword">import</span> logging.<span class="hljs-property">config</span> <br>  <br>logging.<span class="hljs-property">config</span>.<span class="hljs-title function_">fileConfig</span>(<span class="hljs-string">&#x27;logging.conf&#x27;</span>) <br>root_logger = logging.<span class="hljs-title function_">getLogger</span>(<span class="hljs-string">&#x27;root&#x27;</span>) <br>root_logger.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;test root logger...&#x27;</span>) <br>  <br>logger = logging.<span class="hljs-title function_">getLogger</span>(<span class="hljs-string">&#x27;main&#x27;</span>) <br>logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">&#x27;test main logger&#x27;</span>) <br>logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">&#x27;start import module \&#x27;mod\&#x27;...&#x27;</span>) <br><span class="hljs-keyword">import</span> mod <br>  <br>logger.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;let\&#x27;s test mod.testLogger()&#x27;</span>) <br>mod.<span class="hljs-title function_">testLogger</span>() <br>  <br>root_logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">&#x27;finish test...&#x27;</span>) <br></code></pre></td></tr></table></figure><p>子模块mod.py：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> logging <br><span class="hljs-keyword">import</span> submod <br>  <br>logger = logging.<span class="hljs-title function_">getLogger</span>(<span class="hljs-string">&#x27;main.mod&#x27;</span>) <br>logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">&#x27;logger of mod say something...&#x27;</span>) <br>  <br>def <span class="hljs-title function_">testLogger</span>(): <br>  logger.<span class="hljs-title function_">debug</span>(<span class="hljs-string">&#x27;this is mod.testLogger...&#x27;</span>) <br>  submod.<span class="hljs-title function_">tst</span>() <br></code></pre></td></tr></table></figure><p>子子模块submod.py：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> logging <br>  <br>logger = logging.<span class="hljs-title function_">getLogger</span>(<span class="hljs-string">&#x27;main.mod.submod&#x27;</span>) <br>logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">&#x27;logger of submod say something...&#x27;</span>) <br>  <br>def <span class="hljs-title function_">tst</span>(): <br>  logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">&#x27;this is submod.tst()...&#x27;</span>) <br></code></pre></td></tr></table></figure><p>然后运行python main.py，控制台输出：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-number">2012</span>-<span class="hljs-number">03</span>-<span class="hljs-number">09</span> <span class="hljs-number">18</span>:<span class="hljs-number">22</span>:<span class="hljs-number">22</span>,<span class="hljs-number">793</span> - root - <span class="hljs-variable constant_">DEBUG</span> - test root logger... <br><span class="hljs-number">2012</span>-<span class="hljs-number">03</span>-<span class="hljs-number">09</span> <span class="hljs-number">18</span>:<span class="hljs-number">22</span>:<span class="hljs-number">22</span>,<span class="hljs-number">793</span> - main - <span class="hljs-variable constant_">INFO</span> - test main logger <br><span class="hljs-number">2012</span>-<span class="hljs-number">03</span>-<span class="hljs-number">09</span> <span class="hljs-number">18</span>:<span class="hljs-number">22</span>:<span class="hljs-number">22</span>,<span class="hljs-number">809</span> - main - <span class="hljs-variable constant_">INFO</span> - start <span class="hljs-keyword">import</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;mod&#x27;</span>... <br><span class="hljs-number">2012</span>-<span class="hljs-number">03</span>-<span class="hljs-number">09</span> <span class="hljs-number">18</span>:<span class="hljs-number">22</span>:<span class="hljs-number">22</span>,<span class="hljs-number">809</span> - main.<span class="hljs-property">mod</span>.<span class="hljs-property">submod</span> - <span class="hljs-variable constant_">INFO</span> - logger <span class="hljs-keyword">of</span> submod say something... <br><span class="hljs-number">2012</span>-<span class="hljs-number">03</span>-<span class="hljs-number">09</span> <span class="hljs-number">18</span>:<span class="hljs-number">22</span>:<span class="hljs-number">22</span>,<span class="hljs-number">809</span> - main.<span class="hljs-property">mod</span> - <span class="hljs-variable constant_">INFO</span> - logger say something... <br><span class="hljs-number">2012</span>-<span class="hljs-number">03</span>-<span class="hljs-number">09</span> <span class="hljs-number">18</span>:<span class="hljs-number">22</span>:<span class="hljs-number">22</span>,<span class="hljs-number">809</span> - main - <span class="hljs-variable constant_">DEBUG</span> - <span class="hljs-keyword">let</span><span class="hljs-string">&#x27;s test mod.testLogger() </span><br><span class="hljs-string">2012-03-09 18:22:22,825 - main.mod - DEBUG - this is mod.testLogger... </span><br><span class="hljs-string">2012-03-09 18:22:22,825 - main.mod.submod - INFO - this is submod.tst()... </span><br><span class="hljs-string">2012-03-09 18:22:22,841 - root - INFO - finish test... </span><br></code></pre></td></tr></table></figure><p>可以看出，和预想的一样，然后在看一下tst.log，logger配置中的输出的目的地：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-number">2012</span>-<span class="hljs-number">03</span>-<span class="hljs-number">09</span> <span class="hljs-number">18</span>:<span class="hljs-number">22</span>:<span class="hljs-number">22</span>,<span class="hljs-number">793</span> - main - <span class="hljs-variable constant_">INFO</span> - test main logger <br><span class="hljs-number">2012</span>-<span class="hljs-number">03</span>-<span class="hljs-number">09</span> <span class="hljs-number">18</span>:<span class="hljs-number">22</span>:<span class="hljs-number">22</span>,<span class="hljs-number">809</span> - main - <span class="hljs-variable constant_">INFO</span> - start <span class="hljs-keyword">import</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;mod&#x27;</span>... <br><span class="hljs-number">2012</span>-<span class="hljs-number">03</span>-<span class="hljs-number">09</span> <span class="hljs-number">18</span>:<span class="hljs-number">22</span>:<span class="hljs-number">22</span>,<span class="hljs-number">809</span> - main.<span class="hljs-property">mod</span>.<span class="hljs-property">submod</span> - <span class="hljs-variable constant_">INFO</span> - logger <span class="hljs-keyword">of</span> submod say something... <br><span class="hljs-number">2012</span>-<span class="hljs-number">03</span>-<span class="hljs-number">09</span> <span class="hljs-number">18</span>:<span class="hljs-number">22</span>:<span class="hljs-number">22</span>,<span class="hljs-number">809</span> - main.<span class="hljs-property">mod</span> - <span class="hljs-variable constant_">INFO</span> - logger say something... <br><span class="hljs-number">2012</span>-<span class="hljs-number">03</span>-<span class="hljs-number">09</span> <span class="hljs-number">18</span>:<span class="hljs-number">22</span>:<span class="hljs-number">22</span>,<span class="hljs-number">809</span> - main - <span class="hljs-variable constant_">DEBUG</span> - <span class="hljs-keyword">let</span><span class="hljs-string">&#x27;s test mod.testLogger() </span><br><span class="hljs-string">2012-03-09 18:22:22,825 - main.mod - DEBUG - this is mod.testLogger... </span><br><span class="hljs-string">2012-03-09 18:22:22,825 - main.mod.submod - INFO - this is submod.tst()... </span><br></code></pre></td></tr></table></figure><p>tst.log中没有root logger输出的信息，因为logging.conf中配置了只有main logger及其子logger使用RotatingFileHandler，而root logger是输出到标准输出。</p><p>本文参与<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/support-plan">腾讯云自媒体分享计划</a>，欢迎正在阅读的你也加入，一起分享。</p><p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/tag/10216?entry=article">Android</a><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/tag/10169?entry=article">Python</a><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/tag/10387?entry=article">命令行工具</a><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/tag/10370?entry=article">日志服务</a></p><p><a href="javascript:;">举报</a></p><p>点赞 2分享</p><h3 id="我来说"><a href="#我来说" class="headerlink" title="我来说"></a>我来说</h3><h1 id="python-日志-logging-模块详解"><a href="#python-日志-logging-模块详解" class="headerlink" title="python 日志 logging 模块详解"></a>python 日志 logging 模块详解</h1><p>原创</p><p><a target="_blank" rel="noopener" href="https://blog.51cto.com/u_15290941">wx60dc8ce39e154</a>2021-07-12 14:13:42©著作权</p><p><em>文章标签</em><a target="_blank" rel="noopener" href="https://blog.51cto.com/topic/python-2.html">python</a><em>文章分类</em><a target="_blank" rel="noopener" href="https://blog.51cto.com/nav/python">Python</a><a target="_blank" rel="noopener" href="https://blog.51cto.com/nav/program">编程语言</a><em>阅读数</em>133</p><h3 id="文章目录"><a href="#文章目录" class="headerlink" title="文章目录"></a>文章目录</h3><ul><li><a target="_blank" rel="noopener" href="https://blog.51cto.com/u_15290941/3047223#1__1">1 日志相关概念</a></li><li><ul><li><a target="_blank" rel="noopener" href="https://blog.51cto.com/u_15290941/3047223#11__2">1.1 日志的作用</a></li><li><a target="_blank" rel="noopener" href="https://blog.51cto.com/u_15290941/3047223#12__8">1.2 日志的等级</a></li><li><a target="_blank" rel="noopener" href="https://blog.51cto.com/u_15290941/3047223#13_logging__18">1.3 logging 模块两种使用方式</a></li></ul></li><li><a target="_blank" rel="noopener" href="https://blog.51cto.com/u_15290941/3047223#2__logging__22">2 使用 logging 提供的模块级别的函数</a></li><li><ul><li><a target="_blank" rel="noopener" href="https://blog.51cto.com/u_15290941/3047223#21_logging__23">2.1 logging 模块定义常用函数</a></li><li><a target="_blank" rel="noopener" href="https://blog.51cto.com/u_15290941/3047223#22_1_36">2.2 使用方式1：简单配置</a></li><li><a target="_blank" rel="noopener" href="https://blog.51cto.com/u_15290941/3047223#23_2_loggingbasicConfig__58">2.3 使用方式2：使用 logging.basicConfig() 函数</a></li></ul></li><li><a target="_blank" rel="noopener" href="https://blog.51cto.com/u_15290941/3047223#3__Logging__131">3 使用 Logging 日志系统的四大组件</a></li><li><ul><li><a target="_blank" rel="noopener" href="https://blog.51cto.com/u_15290941/3047223#31_Logger__159">3.1 Logger 类</a></li><li><a target="_blank" rel="noopener" href="https://blog.51cto.com/u_15290941/3047223#32_Handler__193">3.2 Handler 类</a></li><li><a target="_blank" rel="noopener" href="https://blog.51cto.com/u_15290941/3047223#33_Formater__212">3.3 Formater 类</a></li><li><a target="_blank" rel="noopener" href="https://blog.51cto.com/u_15290941/3047223#34_Filter_227">3.4 Filter类（了解即可）</a></li><li><a target="_blank" rel="noopener" href="https://blog.51cto.com/u_15290941/3047223#35__238">3.5 日志流处理简要流程</a></li></ul></li></ul><p>1 日志相关概念</p><h2 id="1-1-日志的作用"><a href="#1-1-日志的作用" class="headerlink" title="1.1 日志的作用"></a>1.1 日志的作用</h2><ul><li>程序调试</li><li>了解程序运行是否正常</li><li>故障分析与问题定位</li><li>用户行为分析</li></ul><h2 id="1-2-日志的等级"><a href="#1-2-日志的等级" class="headerlink" title="1.2 日志的等级"></a>1.2 日志的等级</h2><table><thead><tr><th>等级</th><th>含义</th></tr></thead><tbody><tr><td>DEBUG</td><td>最详细的日志信息，典型应用场景是问题诊断</td></tr><tr><td>INFO</td><td>信息详细程度仅次于 DEBUG，通常只记录关键节点信息，用于确认一切都是按照我们预期的那样进行工作</td></tr><tr><td>WARNING</td><td>当某些不期望的事情发生时记录的信息（如，磁盘可用空间较低），但是此时应用程序还是正常运行的</td></tr><tr><td>ERROR</td><td>由于一个更严重的问题导致某些功能不能正常运行时记录的信</td></tr><tr><td>CRITICAL</td><td>当发生严重错误，导致应用程序不能继续运行时记录的信息</td></tr></tbody></table><p>默认情况下，logging 模块将等级为 WARNING 及其以上的日志信息打印到控制台</p><h2 id="1-3-logging-模块两种使用方式"><a href="#1-3-logging-模块两种使用方式" class="headerlink" title="1.3 logging 模块两种使用方式"></a>1.3 logging 模块两种使用方式</h2><p>logging 模块有两种使用方式</p><ul><li>第一种方式是使用 logging 提供的模块级别的函数</li><li>第二种方式是使用 Logging 日志系统的四大组件</li></ul><p>2 使用 logging 提供的模块级别的函数</p><h2 id="2-1-logging-模块定义常用函数"><a href="#2-1-logging-模块定义常用函数" class="headerlink" title="2.1 logging 模块定义常用函数"></a>2.1 logging 模块定义常用函数</h2><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>logging.debug(msg,*args,**kwargs)</td><td>创建一条严重级别为 DEBUG 的日志记录</td></tr><tr><td>logging.info(msg,*args,*kwargs)</td><td>创建一条严重级别为 INFO 的日志记录</td></tr><tr><td>logging.warning(msg,*args,*kwargs)</td><td>创建一条严重级别为 WARNING 的日志记录</td></tr><tr><td>logging.error(msg,*args,*kwargs)</td><td>创建一条严重级别为 ERROR 的日志记录</td></tr><tr><td>logging.critical(msg,*args,**kwargs)</td><td>创建一条严重级别为 CRITICAL 的日志记录</td></tr><tr><td>logging.log(level,*args,*kwargs)</td><td>创建一条严重级别为 level 的日志记录</td></tr><tr><td>logging.basicConfig(**kwargs)</td><td>对 root logger 进行一次性配置</td></tr></tbody></table><p>下面进行使用演示：</p><h2 id="2-2-使用方式1：简单配置"><a href="#2-2-使用方式1：简单配置" class="headerlink" title="2.2 使用方式1：简单配置"></a>2.2 使用方式1：简单配置</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> logging<br><br>logging.debug(<span class="hljs-string">&quot;debug message&quot;</span>)<br>logging.info(<span class="hljs-string">&quot;info message&quot;</span>)<br>logging.warning(<span class="hljs-string">&quot;warning message&quot;</span>)<br>logging.error(<span class="hljs-string">&quot;error message&quot;</span>)<br>logging.critical(<span class="hljs-string">&quot;critical message&quot;</span>)<br>logging.log(level=logging.ERROR, msg = <span class="hljs-string">&quot;error in logging.log function&quot;</span>)<br><span class="hljs-number">1.2</span><span class="hljs-number">.3</span><span class="hljs-number">.4</span><span class="hljs-number">.5</span><span class="hljs-number">.6</span><span class="hljs-number">.7</span><span class="hljs-number">.8</span>.<br></code></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">WARNING:root:warning message<br>ERROR:root:error message<br>CRITICAL:root:critical message<br>ERROR:root:error <span class="hljs-keyword">in</span> logging.log function<br><span class="hljs-number">1.2</span><span class="hljs-number">.3</span><span class="hljs-number">.4</span>.<br></code></pre></td></tr></table></figure><p>默认情况下 logging 模块将日志打印到了标准输出中，且只显示大于等于 WARNING 级别的日志，这说明默认的日志级别设置为 WARNING（日志级别等级 CRITICAL &gt; ERROR &gt; WARNING &gt; INFO &gt; DEBUG）</p><h2 id="2-3-使用方式2：使用-logging-basicConfig-函数"><a href="#2-3-使用方式2：使用-logging-basicConfig-函数" class="headerlink" title="2.3 使用方式2：使用 logging.basicConfig() 函数"></a>2.3 使用方式2：使用 logging.basicConfig() 函数</h2><p>使用 logging.basicConfig() 函数可以调整日志级别、输出格式等</p><p>logging.basicConfig() 函数说明</p><table><thead><tr><th>参数名</th><th>描述</th></tr></thead><tbody><tr><td>filename</td><td>指定日志输出目标文件的文件名，指定该设置项后日志信息就不会被输出到控制台了</td></tr><tr><td>format</td><td>指定日志格式字符串，即指定日志输出时所包含的字段信息以及它们的顺序。logging 模块定义的格式字段下面会列出。</td></tr><tr><td>datefmt</td><td>指定日期&#x2F;时间格式。需要注意的是，该选项要在 format 中包含时间字段 %(asctime)s 时才有效</td></tr><tr><td>level</td><td>指定日志器的日志级别</td></tr><tr><td>stream</td><td>指定日志输出目标 stream，如 sys.stdout、sys.stderr 以及网络 stream。需要说明的是，stream 和 filename 不能同时提供，否则会引发 ValueError 异常</td></tr><tr><td>style</td><td>Python3.2 中新添加的配置项。指定 format 格式字符串的风格，可取值为 ‘%’、’{’ 和 ‘$’，默认为 ‘%’</td></tr><tr><td>handlers</td><td>Python 3.3 中新添加的配置项。该选项如果被指定，它应该是一个创建了多个 Handler 的可迭代对象，这些 handler 将会被添加到 rootlogger。需要说明的是：filename、stream 和 handlers 这三个配置项只能有一个存在，不能同时出现 2 个或 3 个，否则会引发 ValueError 异常。</td></tr></tbody></table><p>logging 模块的格式字符串</p><table><thead><tr><th>字段&#x2F;属性名称</th><th>使用格式</th><th>描述</th></tr></thead><tbody><tr><td>asctime</td><td>%(asctime)s</td><td>日志事件发生的时间–人类可读时间，如：2003-07-08 16:49:45,896</td></tr><tr><td>created</td><td>%(created)f</td><td>日志事件发生的时间–时间戳，就是当时调用 time.time() 函数返回的值</td></tr><tr><td>relativeCreated</td><td>%(relativeCreated)d</td><td>日志事件发生的时间相对于 logging 模块加载时间的相对毫秒数（目前还不知道干嘛用的）</td></tr><tr><td>msecs</td><td>%(msecs)d</td><td>日志事件发生事件的毫秒部分</td></tr><tr><td>levelname</td><td>%(levelname)s</td><td>该日志记录的文字形式的日志级别（‘DEBUG’, ‘INFO’, ‘WARNING’, ‘ERROR’, ‘CRITICAL’）</td></tr><tr><td>levelno</td><td>%(levelno)s</td><td>该日志记录的数字形式的日志级别（10, 20, 30, 40, 50）</td></tr><tr><td>name</td><td>%(name)s</td><td>所使用的日志器名称，默认是 ‘root’，因为默认使用的是 rootLogger</td></tr><tr><td>message</td><td>%(message)s</td><td>日志记录的文本内容，通过 msg % args 计算得到的</td></tr><tr><td>pathname</td><td>%(pathname)s</td><td>调用日志记录函数的源码文件的全路径</td></tr><tr><td>filename</td><td>%(filename)s</td><td>pathname 的文件名部分，包含文件后缀</td></tr><tr><td>module</td><td>%(module)s</td><td>filename 的名称部分，不包含后缀</td></tr><tr><td>lineno</td><td>%(lineno)d</td><td>调用日志记录函数的源代码所在的行号</td></tr><tr><td>funcName</td><td>%(funcName)s</td><td>调用日志记录函数的函数名</td></tr><tr><td>process</td><td>%(process)d</td><td>进程 ID</td></tr><tr><td>processName</td><td>%(processName)s</td><td>进程名称，Python 3.1 新增</td></tr><tr><td>thread</td><td>%(thread)d</td><td>线程 ID</td></tr><tr><td>threadName</td><td>%(thread)s</td><td>线程名称</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># coding=utf-8</span><br><span class="hljs-keyword">import</span> logging<br><br>MY_FORMAT = <span class="hljs-string">&quot;%(asctime)s %(name)s %(levelname)s %(pathname)s %(lineno)d %(message)s&quot;</span>  <span class="hljs-comment"># 配置输出日志格式</span><br>DATE_FORMAT = <span class="hljs-string">&#x27;%Y-%m-%d  %H:%M:%S %a &#x27;</span>  <span class="hljs-comment">#配置输出时间的格式</span><br><br>logging.basicConfig(<br>    filename=<span class="hljs-string">&quot;my.log&quot;</span>,  <span class="hljs-comment"># 指定日志写入到文件</span><br>    level=logging.INFO,<br>    datefmt=DATE_FORMAT,<br>    <span class="hljs-built_in">format</span>=MY_FORMAT,<br>)<br><br>logging.debug(<span class="hljs-string">&quot;debug&quot;</span>)<br>logging.info(<span class="hljs-string">&quot;info&quot;</span>)<br>logging.warning(<span class="hljs-string">&quot;warning&quot;</span>)<br>logging.error(<span class="hljs-string">&quot;error&quot;</span>)<br>logging.critical(<span class="hljs-string">&quot;critical&quot;</span>)<br><span class="hljs-number">1.2</span><span class="hljs-number">.3</span><span class="hljs-number">.4</span><span class="hljs-number">.5</span><span class="hljs-number">.6</span><span class="hljs-number">.7</span><span class="hljs-number">.8</span><span class="hljs-number">.9</span><span class="hljs-number">.10</span><span class="hljs-number">.11</span><span class="hljs-number">.12</span><span class="hljs-number">.13</span><span class="hljs-number">.14</span><span class="hljs-number">.15</span><span class="hljs-number">.16</span><span class="hljs-number">.17</span><span class="hljs-number">.18</span>.<br></code></pre></td></tr></table></figure><p>打开文件 my.log，内容如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html">2020-11-22  19:18:58 Sun  root INFO E:/prapy/python_project/testcase/test1.py 15 info<br>2020-11-22  19:18:58 Sun  root WARNING E:/prapy/python_project/testcase/test1.py 16 warning<br>2020-11-22  19:18:58 Sun  root ERROR E:/prapy/python_project/testcase/test1.py 17 error<br>2020-11-22  19:18:58 Sun  root CRITICAL E:/prapy/python_project/testcase/test1.py 18 critical<br>1.2.3.4.<br></code></pre></td></tr></table></figure><p>说明：</p><ul><li>logging.basicConfig() 函数是一个一次性的简单配置工具使，也就是说只有在第一次调用该函数时会起作用，后续再次调用该函数时完全不会产生任何操作的，多次调用的设置并不是累加操作。</li><li>日志器（Logger）是有层级关系的，上面调用的 logging 模块级别的函数所使用的日志器是 RootLogger 类的实例，其名称为 ‘root’，它是处于日志器层级关系最顶层的日志器，且该实例是以单例模式存在的。</li><li>如果要记录的日志中包含变量数据，可使用一个格式字符串作为这个事件的描述消息（logging.debug、logging.info 等函数的第一个参数），然后将变量数据作为第二个参数 *args 的值进行传递，</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> logging<br><span class="hljs-meta">&gt;&gt;&gt; </span>logging.warning(<span class="hljs-string">&#x27;%s is %d years old.&#x27;</span>, <span class="hljs-string">&#x27;Tom&#x27;</span>, <span class="hljs-number">10</span>)<br>WARNING:root:Tom <span class="hljs-keyword">is</span> <span class="hljs-number">10</span> years old.<br><span class="hljs-number">1.2</span><span class="hljs-number">.3</span>.<br></code></pre></td></tr></table></figure><p>3 使用 Logging 日志系统的四大组件</p><p>上面我们了解到了 logging.debug()、logging.info()、logging.warning()、logging.error()、logging.critical()（分别用以记录不同级别的日志信息），logging.basicConfig()（用默认日志格式（Formatter）为日志系统建立一个默认的流处理器（StreamHandler），设置基础配置（如日志级别等）并加到 root logger（根 Logger）中）这几个 logging 模块级别的函数。</p><p>下面介绍第二种打印日志的方法，日志流处理，使用函数 logging.getLogger([name])（返回一个 logger 对象，如果没有指定名字将返回 root logger）。</p><p>在介绍 logging 模块的日志流处理流程之前，我们先来介绍下 logging 模块的四大组件：</p><table><thead><tr><th>组件名称</th><th>对应类名</th><th>功能描述</th></tr></thead><tbody><tr><td>日志器</td><td>Logger</td><td>提供了应用程序可一直使用的接口</td></tr><tr><td>处理器</td><td>Handler</td><td>将 logger 创建的日志记录发送到合适的目的输出</td></tr><tr><td>过滤器</td><td>Filter</td><td>提供了更细粒度的控制工具来决定输出哪条日志记录，丢弃哪条日志记录</td></tr><tr><td>格式器</td><td>Formatter</td><td>决定日志记录的最终输出格式</td></tr></tbody></table><p><strong>这些组件之间的关系描述：</strong></p><ul><li>日志器（logger）需要通过处理器（handler）将日志信息输出到目标位置，如：文件、sys.stdout、网络等；</li><li>不同的处理器（handler）可以将日志输出到不同的位置；</li><li>日志器（logger）可以设置多个处理器（handler）将同一条日志记录输出到不同的位置；</li><li>每个处理器（handler）都可以设置自己的过滤器（filter）实现日志过滤，从而只保留感兴趣的日志；</li><li>每个处理器（handler）都可以设置自己的格式器（formatter）实现同一条日志以不同的格式输出到不同的地方。</li></ul><p>简单点说就是：日志器（logger）是入口，真正干活儿的是处理器（handler），处理器（handler）还可以通过过滤器（filter）和格式器（formatter）对要输出的日志内容做过滤和格式化等处理操作。</p><p><strong>logging 日志模块相关类及其常用方法介绍</strong></p><p>与 logging 四大组件相关的类：Logger, Handler, Filter, Formatter。</p><h2 id="3-1-Logger-类"><a href="#3-1-Logger-类" class="headerlink" title="3.1 Logger 类"></a>3.1 Logger 类</h2><p>Logger 对象有 3 个任务要做：</p><ol><li>向应用程序代码暴露几个方法，使应用程序可以在运行时记录日志消息；</li><li>基于日志严重等级（默认的过滤设施）或 filter 对象来决定要对哪些日志进行后续处理；</li><li>将日志消息传送给所有感兴趣的日志 handlers。</li></ol><p>Logger 对象最常用的方法分为两类：配置方法和消息发送方法</p><p><strong>Logger 类相关方法</strong></p><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>Logger.setLevel()</td><td>设置日志器将会处理的日志消息的最低严重级别</td></tr><tr><td>Logger.addHandler() 和 Logger.removeHandler()</td><td>为该logger对象添加 和 移除一个handler对象</td></tr><tr><td>Logger.addFilter() 和 Logger.removeFilter()</td><td>为该logger对象添加 和 移除一个filter对象</td></tr></tbody></table><p>logger对象配置完成后，可以使用下面的方法来创建日志记录：</p><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>Logger.debug(), Logger.info(), Logger.warning(), Logger.error(), Logger.critical()</td><td>创建一个与它们的方法名对应等级的日志记录</td></tr><tr><td>Logger.exception()</td><td>创建一个类似于 Logger.error() 的日志消息</td></tr><tr><td>Logger.log()</td><td>需要获取一个明确的日志 level 参数来创建一个日志记录</td></tr></tbody></table><p>一个 Logger 对象呢？一种方式是通过 Logger 类的实例化方法创建一个 Logger 类的实例，但是我们通常都是用第二种方式–logging.getLogger() 方法。</p><p>logging.getLogger() 方法有一个可选参数 name，该参数表示将要返回的日志器的名称标识，如果不提供该参数，则其值为 ‘root’。若以相同的 name 参数值多次调用 getLogger() 方法，将会返回指向同一个 logger 对象的引用。</p><p>多次使用注意不能创建多个logger,否则会出现重复输出日志现象。</p><p><strong>关于logger的层级结构与有效等级的说明：</strong></p><ul><li>logger的名称是一个以 ‘.’ 分割的层级结构，每个 ‘.’ 后面的 logger 都是 ‘.’ 前面的 logger 的 children，例如，有一个名称为 foo 的 logger，其它名称分别为 foo.bar, foo.bar.baz 和 foo.bam 都是 foo 的后代。</li><li>logger 有一个”有效等级（effective level）”的概念。如果一个 logger 上没有被明确设置一个 level，那么该 logger 就是使用它 parent 的 level；如果它的 parent 也没有明确设置 level 则继续向上查找 parent 的 parent 的有效 level，依次类推，直到找到个一个明确设置了 level 的祖先为止。需要说明的是，root logger 总是会有一个明确的 level 设置（默认为 WARNING）。当决定是否去处理一个已发生的事件时，logger 的有效等级将会被用来决定是否将该事件传递给该 logger 的 handlers 进行处理。</li><li>child loggers 在完成对日志消息的处理后，默认会将日志消息传递给与它们的祖先 loggers 相关的 handlers。因此，我们不必为一个应用程序中所使用的所有 loggers 定义和配置 handlers，只需要为一个顶层的 logger 配置 handlers，然后按照需要创建 child loggers 就可足够了。我们也可以通过将一个 logger 的 propagate 属性设置为 False 来关闭这种传递机制。</li></ul><h2 id="3-2-Handler-类"><a href="#3-2-Handler-类" class="headerlink" title="3.2 Handler 类"></a>3.2 Handler 类</h2><p>Handler 对象的作用是（基于日志消息的 level）将消息分发到 handler 指定的位置（文件、网络、邮件等）。Logger 对象可以通过 addHandler() 方法为自己添加 0 个或者更多个 handler 对象。比如，一个应用程序可能想要实现以下几个日志需求：</p><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>Handler.setLevel(lel)</td><td>指定被处理的信息级别，低于 lel 级别的信息将被忽略</td></tr><tr><td>Handler.setFormatter()</td><td>给这个 handler 选择一个格式</td></tr><tr><td>Handler.addFilter(filt)、Handler.removeFilter(filt)</td><td>新增或删除一个 filter 对象</td></tr></tbody></table><p>需要说明的是，应用程序代码不应该直接实例化和使用 Handler 实例。因为 Handler 是一个基类，它只定义了所有 handlers 都应该有的接口，同时提供了一些子类可以直接使用或覆盖的默认行为。下面是一些常用的 Handler：</p><table><thead><tr><th>Handler</th><th>描述</th></tr></thead><tbody><tr><td>logging.StreamHandler</td><td>将日志消息发送到输出到 Stream，如 std.out, std.err 或任何 file-like 对象。</td></tr><tr><td>logging.FileHandler</td><td>将日志消息发送到磁盘文件，默认情况下文件大小会无限增长</td></tr><tr><td>logging.handlers.RotatingFileHandler</td><td>将日志消息发送到磁盘文件，并支持日志文件按大小切割</td></tr><tr><td>logging.hanlders.TimedRotatingFileHandler</td><td>将日志消息发送到磁盘文件，并支持日志文件按时间切割</td></tr><tr><td>logging.handlers.HTTPHandler</td><td>将日志消息以 GET 或 POST 的方式发送给一个 HTTP 服务器</td></tr><tr><td>logging.handlers.SMTPHandler</td><td>将日志消息发送给一个指定的 email 地址</td></tr><tr><td>logging.NullHandler</td><td>该 Handler 实例会忽略 error messages，通常被想使用 logging 的 library 开发者使用来避免 ‘No handlers could be found for logger XXX’ 信息的出现。</td></tr></tbody></table><h2 id="3-3-Formater-类"><a href="#3-3-Formater-类" class="headerlink" title="3.3 Formater 类"></a>3.3 Formater 类</h2><p>Formater 对象用于配置日志信息的最终顺序、结构和内容。与 logging.Handler基类不同的是，应用代码可以直接实例化 Formatter 类。另外，如果你的应用程序需要一些特殊的处理行为，也可以实现一个 Formatter 的子类来完成。</p><p>Formatter 类的构造方法定义如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">logging.Formatter.__init__(fmt=<span class="hljs-literal">None</span>, datefmt=<span class="hljs-literal">None</span>, style=<span class="hljs-string">&#x27;%&#x27;</span>)<br><span class="hljs-number">1.</span><br></code></pre></td></tr></table></figure><p>可见，该构造方法接收 3 个可选参数：</p><ul><li>fmt：指定消息格式化字符串，如果不指定该参数则默认使用 message 的原始值</li><li>datefmt：指定日期格式字符串，如果不指定该参数则默认使用 “%Y-%m-%d %H:%M:%S”</li><li>style：Python 3.2 新增的参数，可取值为 ‘%’，’{’ 和 ‘$’，如果不指定该参数则默认使用 ‘%’</li></ul><p>一般直接用 logging.Formatter(fmt, datefmt)</p><h2 id="3-4-Filter类（了解即可）"><a href="#3-4-Filter类（了解即可）" class="headerlink" title="3.4 Filter类（了解即可）"></a>3.4 Filter类（了解即可）</h2><p>Filter 可以被 Handler 和 Logger 用来做比 level 更细粒度的、更复杂的过滤功能。Filter 是一个过滤器基类，它只允许某个 logger 层级下的日志事件通过过滤。该类定义如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">logging</span>.Filter(name=<span class="hljs-string">&#x27;&#x27;</span>)<br>    <span class="hljs-built_in">filter</span>(record)<br><span class="hljs-number">1.2</span>.<br></code></pre></td></tr></table></figure><p>比如，一个 filter 实例化时传递的 name 参数值为 ‘A.B’，那么该 filter 实例将只允许名称为类似如下规则的 loggers 产生的日志记录通过滤：‘A.B’，‘A.B,C’，‘A.B.C.D’，‘A.B.D’，而名称为 ‘A.BB’，‘B.A.B’ 的 loggers 产生的日志则会被过滤掉。如果 name 的值为空字符串，则允许所有的日志事件通过过滤。</p><p>filter 方法用于具体控制传递的 record 记录是否能通过过滤，如果该方法返回值为0表示不能通过过滤，返回值为非 0 表示可以通过过滤。</p><h2 id="3-5-日志流处理简要流程"><a href="#3-5-日志流处理简要流程" class="headerlink" title="3.5 日志流处理简要流程"></a>3.5 日志流处理简要流程</h2><p>1、创建一个 logger<br>2、设置下 logger 的日志的等级<br>3、创建合适的 Handler(FileHandler 要有路径)<br>4、设置下每个 Handler 的日志等级<br>5、创建下日志的格式<br>6、向 Handler 中添加上面创建的格式<br>7、将上面创建的 Handler 添加到 logger 中<br>8、打印输出 logger.debug\logger.info\logger.warning\logger.error\logger.critical</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># coding=utf-8</span><br><span class="hljs-keyword">import</span> logging<br><br><span class="hljs-comment"># 创建logger，如果参数为空则返回 root logger</span><br>logger = logging.getLogger(<span class="hljs-string">&quot;mylogger&quot;</span>)<br>logger.setLevel(logging.DEBUG)  <span class="hljs-comment"># 设置logger日志等级</span><br><br><span class="hljs-comment"># 创建handler</span><br>fh = logging.FileHandler(<span class="hljs-string">&quot;test.log&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>)<br>ch = logging.StreamHandler()<br><br><span class="hljs-comment"># 设置输出日志格式, 注意 logging.Formatter的大小写</span><br>formatter = logging.Formatter(<br>    fmt=<span class="hljs-string">&quot;%(asctime)s %(name)s %(filename)s %(message)s&quot;</span>,<br>    datefmt=<span class="hljs-string">&quot;%Y/%m/%d %X&quot;</span><br>)<br><br><span class="hljs-comment"># 为handler指定输出格式，注意大小写</span><br>fh.setFormatter(formatter)<br>ch.setFormatter(formatter)<br><br><span class="hljs-comment"># 为logger添加的日志处理器</span><br>logger.addHandler(fh)<br>logger.addHandler(ch)<br><br><span class="hljs-comment"># 输出不同级别的log</span><br>logger.warning(<span class="hljs-string">&quot;warning message&quot;</span>)<br>logger.info(<span class="hljs-string">&quot;info message&quot;</span>)<br>logger.error(<span class="hljs-string">&quot;error message&quot;</span>)<br><span class="hljs-number">1.2</span><span class="hljs-number">.3</span><span class="hljs-number">.4</span><span class="hljs-number">.5</span><span class="hljs-number">.6</span><span class="hljs-number">.7</span><span class="hljs-number">.8</span><span class="hljs-number">.9</span><span class="hljs-number">.10</span><span class="hljs-number">.11</span><span class="hljs-number">.12</span><span class="hljs-number">.13</span><span class="hljs-number">.14</span><span class="hljs-number">.15</span><span class="hljs-number">.16</span><span class="hljs-number">.17</span><span class="hljs-number">.18</span><span class="hljs-number">.19</span><span class="hljs-number">.20</span><span class="hljs-number">.21</span><span class="hljs-number">.22</span><span class="hljs-number">.23</span><span class="hljs-number">.24</span><span class="hljs-number">.25</span><span class="hljs-number">.26</span><span class="hljs-number">.27</span><span class="hljs-number">.28</span><span class="hljs-number">.29</span>.<br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html">2020/11/22 21:00:24 mylogger test3.py warning message<br>2020/11/22 21:00:24 mylogger test3.py info message<br>2020/11/22 21:00:24 mylogger test3.py error message<br>1.2.3.<br></code></pre></td></tr></table></figure><p><strong>python logging 重复写日志问题</strong></p><p>用 Python 的 logging 模块记录日志时，可能会遇到重复记录日志的问题，第一条记录写一次，第二条记录写两次，第三条记录写三次</p><p><strong>原因：没有移除 handler 解决：在日志记录完之后 removeHandler</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># coding=utf-8</span><br><span class="hljs-keyword">import</span> logging<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">msg</span>):<br>    <span class="hljs-comment">#创建logger，如果参数为空则返回root logger</span><br>    logger = logging.getLogger(<span class="hljs-string">&quot;mylogger&quot;</span>)<br>    logger.setLevel(logging.DEBUG)  <span class="hljs-comment">#设置logger日志等级</span><br><br>    <span class="hljs-comment">#创建handler</span><br>    fh = logging.FileHandler(<span class="hljs-string">&quot;test.log&quot;</span>,encoding=<span class="hljs-string">&quot;utf-8&quot;</span>)<br>    ch = logging.StreamHandler()<br><br>    <span class="hljs-comment">#设置输出日志格式</span><br>    formatter = logging.Formatter(<br>        fmt=<span class="hljs-string">&quot;%(asctime)s %(name)s %(filename)s %(message)s&quot;</span>,<br>        datefmt=<span class="hljs-string">&quot;%Y/%m/%d %X&quot;</span><br>        )<br><br>    <span class="hljs-comment">#为handler指定输出格式</span><br>    fh.setFormatter(formatter)<br>    ch.setFormatter(formatter)<br><br>    <span class="hljs-comment">#为logger添加的日志处理器</span><br>    logger.addHandler(fh)<br>    logger.addHandler(ch)<br><br>    <span class="hljs-comment"># 输出不同级别的log</span><br>    logger.info(msg)<br><br><span class="hljs-comment"># 输出不同级别的log</span><br>log(<span class="hljs-string">&quot;message1&quot;</span>)<br>log(<span class="hljs-string">&quot;message2&quot;</span>)<br>log(<span class="hljs-string">&quot;message3&quot;</span>)<br><span class="hljs-number">1.2</span><span class="hljs-number">.3</span><span class="hljs-number">.4</span><span class="hljs-number">.5</span><span class="hljs-number">.6</span><span class="hljs-number">.7</span><span class="hljs-number">.8</span><span class="hljs-number">.9</span><span class="hljs-number">.10</span><span class="hljs-number">.11</span><span class="hljs-number">.12</span><span class="hljs-number">.13</span><span class="hljs-number">.14</span><span class="hljs-number">.15</span><span class="hljs-number">.16</span><span class="hljs-number">.17</span><span class="hljs-number">.18</span><span class="hljs-number">.19</span><span class="hljs-number">.20</span><span class="hljs-number">.21</span><span class="hljs-number">.22</span><span class="hljs-number">.23</span><span class="hljs-number">.24</span><span class="hljs-number">.25</span><span class="hljs-number">.26</span><span class="hljs-number">.27</span><span class="hljs-number">.28</span><span class="hljs-number">.29</span><span class="hljs-number">.30</span><span class="hljs-number">.31</span><span class="hljs-number">.32</span><span class="hljs-number">.33</span>.<br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html">2020/11/22 21:08:04 mylogger test3.py message1<br>2020/11/22 21:08:04 mylogger test3.py message2<br>2020/11/22 21:08:04 mylogger test3.py message2<br>2020/11/22 21:08:04 mylogger test3.py message3<br>2020/11/22 21:08:04 mylogger test3.py message3<br>2020/11/22 21:08:04 mylogger test3.py message3<br>1.2.3.4.5.6.<br></code></pre></td></tr></table></figure><p><strong>分析</strong>：可以看到输出结果有重复打印</p><p>原因：第二次调用 log 的时候，根据 getLogger(name) 里的 name 获取同一个logger，而这个 logger 里已经有了第一次你添加的 handler，第二次调用又添加了一个 handler，所以，这个 logger 里有了两个同样的 handler，以此类推，调用几次就会有几个 handler。</p><p><strong>解决方案 1：添加 removeHandler 语句</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># coding=utf-8</span><br><span class="hljs-keyword">import</span> logging<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">msg</span>):<br>    <span class="hljs-comment"># 创建logger，如果参数为空则返回root logger</span><br>    logger = logging.getLogger(<span class="hljs-string">&quot;mylogger&quot;</span>)<br>    logger.setLevel(logging.DEBUG)  <span class="hljs-comment"># 设置logger日志等级</span><br><br>    <span class="hljs-comment"># 创建handler</span><br>    fh = logging.FileHandler(<span class="hljs-string">&quot;test.log&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>)<br>    ch = logging.StreamHandler()<br><br>    <span class="hljs-comment"># 设置输出日志格式</span><br>    formatter = logging.Formatter(<br>        fmt=<span class="hljs-string">&quot;%(asctime)s %(name)s %(filename)s %(message)s&quot;</span>,<br>        datefmt=<span class="hljs-string">&quot;%Y/%m/%d %X&quot;</span><br>    )<br><br>    <span class="hljs-comment"># 为handler指定输出格式</span><br>    fh.setFormatter(formatter)<br>    ch.setFormatter(formatter)<br><br>    <span class="hljs-comment"># 为logger添加的日志处理器</span><br>    logger.addHandler(fh)<br>    logger.addHandler(ch)<br><br>    <span class="hljs-comment"># 输出不同级别的log</span><br>    logger.info(msg)<br><br>    <span class="hljs-comment"># 解决方案1，添加removeHandler语句，每次用完之后移除Handler</span><br>    logger.removeHandler(fh)<br>    logger.removeHandler(ch)<br><br><br><span class="hljs-comment"># 输出不同级别的log</span><br>log(<span class="hljs-string">&quot;message1&quot;</span>)<br>log(<span class="hljs-string">&quot;message2&quot;</span>)<br>log(<span class="hljs-string">&quot;message3&quot;</span>)<br><span class="hljs-number">1.2</span><span class="hljs-number">.3</span><span class="hljs-number">.4</span><span class="hljs-number">.5</span><span class="hljs-number">.6</span><span class="hljs-number">.7</span><span class="hljs-number">.8</span><span class="hljs-number">.9</span><span class="hljs-number">.10</span><span class="hljs-number">.11</span><span class="hljs-number">.12</span><span class="hljs-number">.13</span><span class="hljs-number">.14</span><span class="hljs-number">.15</span><span class="hljs-number">.16</span><span class="hljs-number">.17</span><span class="hljs-number">.18</span><span class="hljs-number">.19</span><span class="hljs-number">.20</span><span class="hljs-number">.21</span><span class="hljs-number">.22</span><span class="hljs-number">.23</span><span class="hljs-number">.24</span><span class="hljs-number">.25</span><span class="hljs-number">.26</span><span class="hljs-number">.27</span><span class="hljs-number">.28</span><span class="hljs-number">.29</span><span class="hljs-number">.30</span><span class="hljs-number">.31</span><span class="hljs-number">.32</span><span class="hljs-number">.33</span><span class="hljs-number">.34</span><span class="hljs-number">.35</span><span class="hljs-number">.36</span><span class="hljs-number">.37</span><span class="hljs-number">.38</span><span class="hljs-number">.39</span>.<br></code></pre></td></tr></table></figure><p><strong>解决方案 2：在 log 方法里做判断，如果这个 logger 已有 handler，则不再添加 handler。</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># coding=utf-8</span><br><span class="hljs-keyword">import</span> logging<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">msg</span>):<br>    <span class="hljs-comment"># 创建logger，如果参数为空则返回root logger</span><br>    logger = logging.getLogger(<span class="hljs-string">&quot;mylogger&quot;</span>)<br>    logger.setLevel(logging.DEBUG)  <span class="hljs-comment"># 设置logger日志等级</span><br><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> logger.handlers:<br>        <span class="hljs-comment"># 创建handler</span><br>        fh = logging.FileHandler(<span class="hljs-string">&quot;test.log&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>)<br>        ch = logging.StreamHandler()<br><br>        <span class="hljs-comment"># 设置输出日志格式</span><br>        formatter = logging.Formatter(<br>            fmt=<span class="hljs-string">&quot;%(asctime)s %(name)s %(filename)s %(message)s&quot;</span>,<br>            datefmt=<span class="hljs-string">&quot;%Y/%m/%d %X&quot;</span><br>        )<br><br>        <span class="hljs-comment"># 为handler指定输出格式</span><br>        fh.setFormatter(formatter)<br>        ch.setFormatter(formatter)<br><br>        <span class="hljs-comment"># 为logger添加的日志处理器</span><br>        logger.addHandler(fh)<br>        logger.addHandler(ch)<br><br>    <span class="hljs-comment"># 输出不同级别的log</span><br>    logger.info(msg)<br><br><br><span class="hljs-comment"># 输出不同级别的log</span><br>log(<span class="hljs-string">&quot;message1&quot;</span>)<br>log(<span class="hljs-string">&quot;message2&quot;</span>)<br>log(<span class="hljs-string">&quot;message3&quot;</span>)<br><span class="hljs-number">1.2</span><span class="hljs-number">.3</span><span class="hljs-number">.4</span><span class="hljs-number">.5</span><span class="hljs-number">.6</span><span class="hljs-number">.7</span><span class="hljs-number">.8</span><span class="hljs-number">.9</span><span class="hljs-number">.10</span><span class="hljs-number">.11</span><span class="hljs-number">.12</span><span class="hljs-number">.13</span><span class="hljs-number">.14</span><span class="hljs-number">.15</span><span class="hljs-number">.16</span><span class="hljs-number">.17</span><span class="hljs-number">.18</span><span class="hljs-number">.19</span><span class="hljs-number">.20</span><span class="hljs-number">.21</span><span class="hljs-number">.22</span><span class="hljs-number">.23</span><span class="hljs-number">.24</span><span class="hljs-number">.25</span><span class="hljs-number">.26</span><span class="hljs-number">.27</span><span class="hljs-number">.28</span><span class="hljs-number">.29</span><span class="hljs-number">.30</span><span class="hljs-number">.31</span><span class="hljs-number">.32</span><span class="hljs-number">.33</span><span class="hljs-number">.34</span><span class="hljs-number">.35</span><span class="hljs-number">.36</span>.<br></code></pre></td></tr></table></figure><p><strong>logger 调用方法的例子</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># coding=utf-8</span><br><span class="hljs-keyword">import</span> logging.handlers<br><span class="hljs-keyword">import</span> datetime<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_logger</span>():<br>    logger = logging.getLogger(<span class="hljs-string">&#x27;mylogger&#x27;</span>)  <span class="hljs-comment"># mylogger为日志器的名称标识，如果不提供该参数，默认为&#x27;root&#x27;</span><br>    logger.setLevel(logging.DEBUG)  <span class="hljs-comment"># 设置logger处理等级</span><br><br>    <span class="hljs-comment"># 这里进行判断，如果logger.handlers列表为空，则添加，否则，直接去写日志</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> logger.handlers:<br>        <span class="hljs-comment"># rf_handler将所有的日志信息写到 all.log 中</span><br>        <span class="hljs-comment"># when:字符串，定义了日志切分的间隔时间单位</span><br>        <span class="hljs-comment"># interval:间隔时间单位的个数，指等待多少个when的时间后Logger会自动重建新闻继续进行日志记录</span><br>        <span class="hljs-comment"># backupCount 是保留日志的文件个数，日志文件最多backupCount个，多余的删除，默认为0，表示不会自动删除</span><br>        rf_handler = logging.handlers.TimedRotatingFileHandler(<span class="hljs-string">&#x27;all.log&#x27;</span>, when=<span class="hljs-string">&#x27;midnight&#x27;</span>, interval=<span class="hljs-number">1</span>, backupCount=<span class="hljs-number">7</span>,<br>                                                               atTime=datetime.time(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>))<br><br>        <span class="hljs-comment"># 设置输出日志格式</span><br>        rf_formatter = logging.Formatter(<span class="hljs-string">&quot;%(asctime)s - %(levelname)s - %(message)s&quot;</span>)<br>        <span class="hljs-comment"># 为handler指定输出格式</span><br>        rf_handler.setFormatter(rf_formatter)<br><br>        <span class="hljs-comment"># f_handler 将等级大于等于 error的信息写到error.log文件中</span><br>        f_handler = logging.FileHandler(<span class="hljs-string">&#x27;error.log&#x27;</span>)<br>        f_handler.setLevel(logging.ERROR)<br><br>        <span class="hljs-comment"># 设置输出日志格式</span><br>        f_formatter = logging.Formatter(<span class="hljs-string">&quot;%(asctime)s - %(levelname)s - %(filename)s[:%(lineno)d] - %(message)s&quot;</span>)<br>        <span class="hljs-comment"># 为handler指定输出格式</span><br>        f_handler.setFormatter(f_formatter)<br><br>        <span class="hljs-comment"># 为logger添加的日志处理器</span><br>        logger.addHandler(rf_handler)<br>        logger.addHandler(f_handler)<br><br>    <span class="hljs-keyword">return</span> logger<br><br><br>logger = get_logger()<br>logger.debug(<span class="hljs-string">&#x27;debug message&#x27;</span>)<br>logger.info(<span class="hljs-string">&#x27;info message&#x27;</span>)<br>logger.warning(<span class="hljs-string">&#x27;warning message&#x27;</span>)<br>logger.error(<span class="hljs-string">&#x27;error message&#x27;</span>)<br>logger.critical(<span class="hljs-string">&#x27;critical message&#x27;</span>)<br>logger.log(level=logging.ERROR, msg=<span class="hljs-string">&quot;logger.log message&quot;</span>)<br><span class="hljs-number">1.2</span><span class="hljs-number">.3</span><span class="hljs-number">.4</span><span class="hljs-number">.5</span><span class="hljs-number">.6</span><span class="hljs-number">.7</span><span class="hljs-number">.8</span><span class="hljs-number">.9</span><span class="hljs-number">.10</span><span class="hljs-number">.11</span><span class="hljs-number">.12</span><span class="hljs-number">.13</span><span class="hljs-number">.14</span><span class="hljs-number">.15</span><span class="hljs-number">.16</span><span class="hljs-number">.17</span><span class="hljs-number">.18</span><span class="hljs-number">.19</span><span class="hljs-number">.20</span><span class="hljs-number">.21</span><span class="hljs-number">.22</span><span class="hljs-number">.23</span><span class="hljs-number">.24</span><span class="hljs-number">.25</span><span class="hljs-number">.26</span><span class="hljs-number">.27</span><span class="hljs-number">.28</span><span class="hljs-number">.29</span><span class="hljs-number">.30</span><span class="hljs-number">.31</span><span class="hljs-number">.32</span><span class="hljs-number">.33</span><span class="hljs-number">.34</span><span class="hljs-number">.35</span><span class="hljs-number">.36</span><span class="hljs-number">.37</span><span class="hljs-number">.38</span><span class="hljs-number">.39</span><span class="hljs-number">.40</span><span class="hljs-number">.41</span><span class="hljs-number">.42</span><span class="hljs-number">.43</span><span class="hljs-number">.44</span><span class="hljs-number">.45</span><span class="hljs-number">.46</span>.<br></code></pre></td></tr></table></figure><p>参考：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/Nicholas0707/p/9021672.html#_label1_1">https://www.cnblogs.com/Nicholas0707/p/9021672.html#_label1_1</a></p><h1 id="引入类"><a href="#引入类" class="headerlink" title="引入类"></a>引入类</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> myfolder <span class="hljs-keyword">import</span> myfile<br><br>class1 = myfile.myclass()<br></code></pre></td></tr></table></figure><h3 id="示例代码-2："><a href="#示例代码-2：" class="headerlink" title="示例代码 2："></a><a target="_blank" rel="noopener" href="https://www.delftstack.com/zh/howto/python/python-import-class-from-another-file/#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81-2">示例代码 2：</a></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> myfolder.myfile <span class="hljs-keyword">import</span> myclass<br></code></pre></td></tr></table></figure></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/%E6%8A%80%E6%9C%AF/" class="category-chain-item">技术</a></span></span></div></div><div class="license-box my-3"><div class="license-title"><div>Python中内置的日志模块logging用法详解</div><div>http://example.com/2022/01/22/Python中内置的日志模块logging用法详解/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>MuyanGit</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2022年1月22日</div></div><div class="license-meta-item"><div>许可协议</div><div><a target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/2022/06/08/Windows%E6%A1%8C%E9%9D%A2%E7%A8%8B%E5%BA%8F%E8%87%AA%E5%8A%A8%E5%8C%96%E6%8E%A7%E5%88%B6%E4%B9%8Buiautomation%E6%A8%A1%E5%9D%97%E5%85%A8%E9%9D%A2%E8%AE%B2%E8%A7%A3/" title="Windows桌面程序自动化控制之uiautomation模块全面讲解"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">Windows桌面程序自动化控制之uiautomation模块全面讲解</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2021/11/18/%E8%8B%B1%E6%96%87%E6%96%87%E6%9C%AC%E5%88%86%E8%AF%8D%E4%B9%8B%E5%B7%A5%E5%85%B7NLTK/" title="英文文本分词之工具NLTK"><span class="hidden-mobile">英文文本分词之工具NLTK</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><div id="valine"></div><script type="text/javascript">Fluid.utils.loadComments("#valine",function(){Fluid.utils.createScript("https://lib.baomitu.com/valine/1.4.17/Valine.min.js",function(){var i=Object.assign({appId:"wrsI8VLOqU4aU1Bf7ax2ybPp-MdYXbMMI",appKey:"AEijWlUoG3pMbyJKxexAmJtN",path:"window.location.pathname",placeholder:null,avatar:"retro",meta:["nick","mail","link"],requiredFields:[],pageSize:10,lang:"zh-CN",highlight:!1,recordIP:!1,serverURLs:"",emojiCDN:null,emojiMaps:null,enableQQ:!1},{el:"#valine",path:window.location.pathname});new Valine(i),Fluid.utils.waitElementVisible("#valine .vcontent",()=>{var i="#valine .vcontent img:not(.vemoji)";Fluid.plugins.imageCaption(i),Fluid.plugins.fancyBox(i)})})})</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div><div class="statistics"><span id="leancloud-site-pv-container" style="display:none">总访问量 <span id="leancloud-site-pv"></span> 次 </span><span id="leancloud-site-uv-container" style="display:none">总访客数 <span id="leancloud-site-uv"></span> 人</span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",function(){NProgress.done()})</script><script src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t){var e=Fluid.plugins.typing,t=t.getElementById("subtitle");t&&e&&e(t.getAttribute("data-typed-text"))}((window,document))</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js",function(){var t,o=jQuery("#toc");0!==o.length&&window.tocbot&&(t=jQuery("#board-ctn").offset().top,window.tocbot.init({tocSelector:"#toc-body",contentSelector:".markdown-body",headingSelector:CONFIG.toc.headingSelector||"h1,h2,h3,h4,h5,h6",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",collapseDepth:CONFIG.toc.collapseDepth||0,scrollSmooth:!0,headingsOffset:-t}),0<o.find(".toc-list-item").length&&o.css("visibility","visible"))})</script><script src="https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var o,n=[];for(o of(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","))n.push(".markdown-body > "+o.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(n.join(", "))})</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",function(){Fluid.plugins.fancyBox()})</script><script>Fluid.plugins.imageCaption()</script><script defer src="/js/leancloud.js"></script><script src="/js/local-search.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>